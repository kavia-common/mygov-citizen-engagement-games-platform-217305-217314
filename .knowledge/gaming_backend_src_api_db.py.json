{"is_source_file": true, "format": "Python", "description": "This file provides utility functions and classes for managing SQLite database connections, including retrieving the database file path from environment variables, establishing connections with specific PRAGMAs, and context management for transaction safety.", "external_files": ["os", "sqlite3", "contextlib", "typing"], "external_methods": ["os.getenv", "os.path.exists", "sqlite3.connect", "sqlite3.Row", "sqlite3.Cursor"], "published": ["get_db_file_from_env", "create_connection", "db_session", "DatabaseConfigError"], "classes": [{"name": "DatabaseConfigError", "description": "Custom exception indicating issues with database configuration."}], "methods": [{"name": "str get_db_file_from_env(env_var: str = \"DB_FILE\")", "description": "Retrieves the database file path from an environment variable, raising an error if not set or if the file does not exist.", "scope": "", "scopeKind": ""}, {"name": "sqlite3.Connection _connect(db_file: str)", "description": "Establishes a SQLite connection with foreign key constraints enabled and a row factory for named access.", "scope": "", "scopeKind": ""}, {"name": "sqlite3.Connection create_connection(db_file: Optional[str] = None)", "description": "Creates a database connection, optionally using a provided file path, otherwise reads from environment variable.", "scope": "", "scopeKind": ""}, {"name": "Generator[sqlite3.Cursor,None,None] db_session(conn: sqlite3.Connection)", "description": "A context manager that manages database transactions, committing on success and rolling back on failure.", "scope": "", "scopeKind": ""}], "calls": ["os.getenv", "os.path.exists", "sqlite3.connect", "conn.execute", "conn.cursor", "cur.close", "conn.commit", "conn.rollback"], "search-terms": ["SQLite database connection", "environment variable DB_FILE", "context manager for database", "foreign keys PRAGMA", "Python sqlite3"], "state": 2, "file_id": 5, "knowledge_revision": 11, "git_revision": "", "ctags": [{"_type": "tag", "name": "DatabaseConfigError", "path": "/home/kavia/workspace/code-generation/mygov-citizen-engagement-games-platform-217305-217314/gaming_backend/src/api/db.py", "pattern": "/^class DatabaseConfigError(Exception):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_connect", "path": "/home/kavia/workspace/code-generation/mygov-citizen-engagement-games-platform-217305-217314/gaming_backend/src/api/db.py", "pattern": "/^def _connect(db_file: str) -> sqlite3.Connection:$/", "language": "Python", "typeref": "typename:sqlite3.Connection", "kind": "function", "signature": "(db_file: str)"}, {"_type": "tag", "name": "create_connection", "path": "/home/kavia/workspace/code-generation/mygov-citizen-engagement-games-platform-217305-217314/gaming_backend/src/api/db.py", "pattern": "/^def create_connection(db_file: Optional[str] = None) -> sqlite3.Connection:$/", "language": "Python", "typeref": "typename:sqlite3.Connection", "kind": "function", "signature": "(db_file: Optional[str] = None)"}, {"_type": "tag", "name": "db_session", "path": "/home/kavia/workspace/code-generation/mygov-citizen-engagement-games-platform-217305-217314/gaming_backend/src/api/db.py", "pattern": "/^def db_session(conn: sqlite3.Connection) -> Generator[sqlite3.Cursor, None, None]:$/", "language": "Python", "typeref": "typename:Generator[sqlite3.Cursor,None,None]", "kind": "function", "signature": "(conn: sqlite3.Connection)"}, {"_type": "tag", "name": "get_db_file_from_env", "path": "/home/kavia/workspace/code-generation/mygov-citizen-engagement-games-platform-217305-217314/gaming_backend/src/api/db.py", "pattern": "/^def get_db_file_from_env(env_var: str = \"DB_FILE\") -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(env_var: str = \"DB_FILE\")"}], "hash": "13160254231519afd080eea9975fd9f9", "format-version": 4, "code-base-name": "gaming_backend", "filename": "gaming_backend/src/api/db.py", "revision_history": [{"11": ""}]}